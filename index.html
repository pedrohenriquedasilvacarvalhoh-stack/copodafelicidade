<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Copo da Felicidade</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #b9d7f2;
    text-align: center;
}

header {
    background-color: #ff6b81;
    color: white;
    padding: 20px;
    font-size: 28px;
    font-weight: bold;
}

.container {
    margin: 30px auto;
    background: white;
    width: 90%;
    max-width: 900px;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

h2 { color: #ff6b81; }

img {
    width: 100%;
    border-radius: 10px;
    margin-bottom: 10px;
}

input, select, textarea {
    width: 90%;
    padding: 10px;
    margin: 10px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
}

button {
    background-color: #ff4757;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 5px;
}

button:hover { background-color: #e84118; }

.hidden { display: none; }

.box {
    background: #f1f1f1;
    padding: 10px;
    margin: 10px 0;
    border-radius: 8px;
}

.total {
    font-weight: bold;
    color: #e84118;
}

.flex-area {
    display: flex;
    gap: 20px;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
}

.lado-foto {
    flex: 1;
    min-width: 200px;
}

.lado-pedido {
    flex: 1;
    min-width: 250px;
}

.frase {
    font-weight: bold;
    color: #ff4757;
    margin-top: 10px;
    font-size: 16px;
}

.flex-area {
    display: flex;
    gap: 30px;
    align-items: flex-start;
    justify-content: center;
}

.rodape {
    margin-top: 40px;
    padding: 20px;
    background: #ff6b81;
    color: white;
    font-weight: bold;
    text-align: center;
}

.autor {
    color: yellow;
    text-decoration: none;
    transition: 0.3s;
}

.autor:hover {
    color: white;
    transform: scale(1.1);
}

.efeitos {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: -1;
}

/* MORANGOS */
.morango {
    position: absolute;
    top: -50px;
    font-size: 25px;
    animation: cair 8s linear infinite;
}

/* LUZES CAINDO */
.luz {
    position: absolute;
    top: -20px;
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 8px white,
                0 0 15px #ff6b81,
                0 0 25px #ff4757;
    animation: cair 6s linear infinite;
}

/* LUZES PARADAS */
.luz-parada {
    position: absolute;
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 10px white,
                0 0 20px #ff6b81,
                0 0 30px #ff4757;
    animation: brilho 3s ease-in-out infinite alternate;
}

/* ANIMA√á√ÉO QUEDA */
@keyframes cair {
    0% {
        transform: translateY(0);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    100% {
        transform: translateY(110vh);
        opacity: 0;
    }
}

/* ANIMA√á√ÉO BRILHO */
@keyframes brilho {
    0% { opacity: 0.3; transform: scale(0.8); }
    100% { opacity: 1; transform: scale(1.5); }
}

.botoes-avaliacao {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

.botoes-avaliacao button {
    min-width: 140px;
}

.sobre-texto {
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 10px;
}

</style>
</head>

<body>

<header>üçì Copo da Felicidade üç´</header>

<div class="container" id="pedidoArea">

<div class="flex-area">

<div class="lado-foto">
<img src="copo1.png">
<img src="copo2.png">


</div>

<div class="lado-pedido">

<p class="frase">
‚ú® Uma explos√£o de sabor em cada colherada! ‚ú®
</p>

<h2>Fa√ßa seu Pedido</h2>

<form onsubmit="salvarPedido(event)">
<input type="text" id="nome" placeholder="Seu nome" required>

<select id="sabor" required onchange="calcularTotal()">
<option value="">Escolha o sabor</option>
<option value="15">Morango - R$15</option>
<option value="16">Chocolate - R$16</option>
<option value="18">Morango com Chocolate - R$18</option>
</select>

<input type="number" id="quantidade" placeholder="Quantidade" min="1" required oninput="calcularTotal()">

<div class="total">
Total: R$ <span id="valorTotal">0</span>
</div>

<input type="text" id="whatsapp" placeholder="Seu WhatsApp" required>

<button type="submit">Fazer Pedido</button>
</form>

<button onclick="mostrarLogin()">√Årea do Administrador</button>

<!-- AVALIA√á√ïES -->
<div class="container">
<h2>Deixe a sua Avalia√ß√£o</h2>



<input type="text" id="nomeAvaliacao" placeholder="Seu nome">
<textarea id="comentario" placeholder="Deixe sua avalia√ß√£o"></textarea>
<input type="file" id="fotoAvaliacao" accept="image/*" hidden>

<div class="botoes-avaliacao">
    <button type="button" onclick="document.getElementById('fotoAvaliacao').click()">
        üì∑ Adicionar Foto
    </button>

    <button onclick="salvarAvaliacao()">
        Enviar
    </button>   
</div>


<!-- As avalia√ß√µes aparecem aqui-->
<div id="listaAvaliacoes"></div>


</div>

</div>
</div>

</div>




<!-- LOGIN -->
<div class="container hidden" id="loginArea">
<h2>Login ADM</h2>
<input type="text" id="usuario" placeholder="Usu√°rio">
<input type="password" id="senha" placeholder="Senha">
<button onclick="fazerLogin()">Entrar</button>
</div>

<!-- ADMIN -->
<div class="container hidden" id="adminArea">
<h2>Painel Administrativo</h2>

<h3>Pedidos</h3>
<div id="listaPedidos"></div>
<h2>üì¶ Controle de Estoque</h2>

<table id="tabelaEstoque" border="1" style="width:100%; border-collapse: collapse; background:white;">
    <thead style="background:#ff6b81; color:white;">
        <tr>
            <th>Ingrediente</th>
            <th>Quantidade Restante</th>
        </tr>
    </thead>
    <tbody id="estoqueInfo">
    </tbody>
</table>

<h2>üìâ Ingredientes Utilizados</h2>

<table border="1" style="width:100%; border-collapse: collapse; background:white;">
    <thead style="background:#e84118; color:white;">
        <tr>
            <th>Ingrediente</th>
            <th>Total Utilizado</th>
        </tr>
    </thead>
    <tbody id="tabelaGastos">
    </tbody>
</table>

<h2>üí∞ Custo Total de Ingredientes Usados</h2>
<p>R$ <span id="custoTotal">0.00</span></p>

<h3>Coment√°rios</h3>
<div id="listaComentariosADM"></div>

<button onclick="voltar()">Voltar</button>
</div>



<script>

/* =========================
   VARI√ÅVEIS GLOBAIS
========================= */

let estoque = {
    ovo: { quantidade: 30, unidade: "un", precoPorUnidade: 0.76 },
    acucar: { quantidade: 1000, unidade: "g", precoPorUnidade: 0.00299 },
    leite: { quantidade: 2000, unidade: "ml", precoPorUnidade: 0.00445 },
    oleo: { quantidade: 900, unidade: "ml", precoPorUnidade: 0.0078 },
    massa: { quantidade: 800, unidade: "g", precoPorUnidade: 0.0099 },

    morango: { quantidade: 1000, unidade: "g", precoPorUnidade: 0.02 },
    leiteCondensado: { quantidade: 3, unidade: "un", precoPorUnidade: 5.19 },
    cremeDeLeite: { quantidade: 3, unidade: "un", precoPorUnidade: 2.29 },
    granulado: { quantidade: 500, unidade: "g", precoPorUnidade: 0.0278 },
    leitePo: { quantidade: 400, unidade: "g", precoPorUnidade: 0.03175 }
};


let ingredientesGastos = {};

let custoIngredientesUsados = 0;

let custoReposicao = 0;

/* =========================
   TOTAL DO PEDIDO
========================= */

function calcularTotal() {
    let preco = parseFloat(document.getElementById("sabor").value);
    let quantidade = parseInt(document.getElementById("quantidade").value);

    if(preco && quantidade) {
        document.getElementById("valorTotal").innerText = (preco * quantidade).toFixed(2);
    } else {
        document.getElementById("valorTotal").innerText = "0";
    }
}


/* =========================
   SALVAR PEDIDO
========================= */

function salvarPedido(event) {
    event.preventDefault();

    let nome = document.getElementById("nome").value;
    let sabor = document.getElementById("sabor").selectedOptions[0].text;
    let quantidade = parseInt(document.getElementById("quantidade").value);
    let whatsapp = document.getElementById("whatsapp").value;

    let pedido = { nome, sabor, quantidade, whatsapp };
    
    atualizarEstoquePorPedido(quantidade);

    let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
    pedidos.push(pedido);
    localStorage.setItem("pedidos", JSON.stringify(pedidos));

    alert("Pedido enviado com sucesso!");

    document.querySelector("form").reset();
    document.getElementById("valorTotal").innerText = "0";
}


/* =========================
   LOGIN
========================= */

function mostrarLogin() {
    document.getElementById("pedidoArea").classList.add("hidden");
    document.getElementById("loginArea").classList.remove("hidden");
}

function fazerLogin() {
    let usuario = document.getElementById("usuario").value;
    let senha = document.getElementById("senha").value;

    if(usuario === "admin" && senha === "1234") {

        document.getElementById("loginArea").classList.add("hidden");
        document.getElementById("adminArea").classList.remove("hidden");

        carregarPedidos();
        carregarComentariosADM();
        atualizarEstoque();

    } else {
        alert("Login incorreto");
    }
}

function voltar() {
    document.getElementById("adminArea").classList.add("hidden");
    document.getElementById("pedidoArea").classList.remove("hidden");
}


/* =========================
   PEDIDOS ADM
========================= */

function carregarPedidos() {
    let lista = document.getElementById("listaPedidos");
    lista.innerHTML = "";

    let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];

    pedidos.forEach((p, index) => {
        lista.innerHTML += `
        <div class="box">
            <strong>${p.nome}</strong><br>
            ${p.sabor}<br>
            Qtd: ${p.quantidade}<br>
            WhatsApp: ${p.whatsapp}<br>
            <button onclick="removerPedido(${index})">‚úî Pedido Feito</button>
        </div>
        `;
    });
}

function removerPedido(index) {
    let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
    pedidos.splice(index, 1);
    localStorage.setItem("pedidos", JSON.stringify(pedidos));
    carregarPedidos();
}


/* =========================
   AVALIA√á√ïES
========================= */

function salvarAvaliacao() {
    let nome = document.getElementById("nomeAvaliacao").value;
    let comentario = document.getElementById("comentario").value;
    let fotoInput = document.getElementById("fotoAvaliacao");
    let arquivo = fotoInput.files[0];

    if(nome && comentario) {

        if(arquivo) {
            let reader = new FileReader();
            reader.onload = function(e) {
                salvarNoStorage(nome, comentario, e.target.result);
            };
            reader.readAsDataURL(arquivo);
        } else {
            salvarNoStorage(nome, comentario, null);
        }
    }
}

function salvarNoStorage(nome, comentario, foto) {
    let avaliacao = { nome, comentario, foto };

    let avaliacoes = JSON.parse(localStorage.getItem("avaliacoes")) || [];
    avaliacoes.push(avaliacao);
    localStorage.setItem("avaliacoes", JSON.stringify(avaliacoes));

    document.getElementById("nomeAvaliacao").value = "";
    document.getElementById("comentario").value = "";
    document.getElementById("fotoAvaliacao").value = "";

    carregarAvaliacoes();
}

function carregarAvaliacoes() {
    let lista = document.getElementById("listaAvaliacoes");
    lista.innerHTML = "";

    let avaliacoes = JSON.parse(localStorage.getItem("avaliacoes")) || [];

    avaliacoes.forEach(a => {
        lista.innerHTML += `
        <div class="box">
            <strong>${a.nome}</strong><br>
            ${a.comentario}<br>
            ${a.foto ? `<img src="${a.foto}" style="width:100px;margin-top:10px;border-radius:8px;">` : ""}
        </div>
        `;
    });
}

function carregarComentariosADM() {
    let lista = document.getElementById("listaComentariosADM");
    lista.innerHTML = "";

    let avaliacoes = JSON.parse(localStorage.getItem("avaliacoes")) || [];

    avaliacoes.forEach((a, index) => {
        lista.innerHTML += `
        <div class="box">
            <strong>${a.nome}</strong><br>
            ${a.comentario}<br>
            <button onclick="excluirComentario(${index})">Excluir</button>
        </div>
        `;
    });
}

function excluirComentario(index) {
    let avaliacoes = JSON.parse(localStorage.getItem("avaliacoes")) || [];
    avaliacoes.splice(index, 1);
    localStorage.setItem("avaliacoes", JSON.stringify(avaliacoes));
    carregarComentariosADM();
    carregarAvaliacoes();
}


/* =========================
   ESTOQUE
========================= */

function atualizarEstoquePorPedido(quantidade) {

    let consumoPorCopo = {
        ovo: 0.4,
        acucar: 20,
        leite: 20,
        oleo: 10,
        massa: 20,
        morango: 50,
        leiteCondensado: 0.2,
        cremeDeLeite: 0.2,
        granulado: 10,
        leitePo: 10
    };

    for (let item in consumoPorCopo) {

        let usado = consumoPorCopo[item] * quantidade;

        // desconta do estoque
        estoque[item].quantidade -= usado;

        // soma no controle de gastos
        if (!ingredientesGastos[item]) {
            ingredientesGastos[item] = 0;
        }

        ingredientesGastos[item] += usado;

        // calcula custo reposi√ß√£o
        custoReposicao += usado * estoque[item].precoPorUnidade;
    }

    document.getElementById("custoTotal").innerText = custoReposicao.toFixed(2);

    atualizarEstoque();
    atualizarTabelaGastos();
}

function formatarNome(nome) {
    const nomesBonitos = {
        ovo: "Ovos",
        acucar: "A√ß√∫car",
        leite: "Leite",
        oleo: "√ìleo",
        achocolatado: "Achocolatado",
        leitePo: "Leite em p√≥",
        morango: "Morango",
        leiteCondensado: "Leite Condensado",
        margarina: "Margarina",
        cremeDeLeite: "Creme de Leite",
        massa: "Massa pronta",
        granulado: "Granulado"
    };

    return nomesBonitos[nome] || nome;
}

function atualizarEstoque() {

    let tbody = document.getElementById("estoqueInfo");
    tbody.innerHTML = "";

    for (let item in estoque) {

        tbody.innerHTML += `
            <tr>
                <td>${formatarNome(item)}</td>
                <td>${estoque[item].quantidade.toFixed(2)} ${estoque[item].unidade}</td>
            </tr>
        `;
    }
}



/* =========================
   INICIALIZA√á√ÉO
========================= */

window.onload = function() {
    carregarAvaliacoes();
    atualizarEstoque();
    atualizarTabelaGastos();
};

function atualizarTabelaGastos() {

    let tbody = document.getElementById("tabelaGastos");
    tbody.innerHTML = "";

    for (let item in ingredientesGastos) {

        tbody.innerHTML += `
            <tr>
                <td>${formatarNome(item)}</td>
                <td>${ingredientesGastos[item].toFixed(2)} ${estoque[item].unidade}</td>
            </tr>
        `;
    }
}


</script>

<div class="container">
    <h2>üçì Sobre o Copo da Felicidade</h2>
    
    <p style="font-size:16px; line-height:1.6;">
        O Copo da Felicidade √© uma sobremesa deliciosa feita em camadas,
        combinando bolo macio, cremes irresist√≠veis e frutas fresquinhas.
        Cada colherada √© uma explos√£o de sabor que conquista qualquer pessoa!
    </p>

    <p style="font-size:16px; line-height:1.6;">
        Ideal para festas, encontros ou para matar aquela vontade de doce,
        nosso copo √© preparado com ingredientes de qualidade e muito carinho.
    </p>

    <p style="font-weight:bold; color:#ff4757; margin-top:15px;">
        üíñ Feito para deixar seu dia mais feliz!
    </p>
</div>

<footer class="rodape">
    ¬© 2026 | Desenvolvido por 
    <a href="#" class="autor">Pedro lindoso</a> üöÄ  
    <br>
    Desenvolvedor Front-End em evolu√ß√£o üíª‚ú®
</footer>

<div class="efeitos"></div>


</body>
</html>
